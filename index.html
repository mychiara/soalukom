<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulasi Soal Keperawatan</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Container untuk Form Lisensi dan Login Awal (Tidak Berubah) -->
    <div id="license-form-container" class="container-view">
        <h1><span class="app-title-highlight">Selamat Datang!</span></h1>
        <h3><span class="app-title-highlight">di Aplikasi Bimbel UKOM</span></h3>
        <p class="app-description">
            Platform ini dirancang untuk membantu Anda, para calon perawat dalam mengasah pengetahuan dan mempersiapkan diri menghadapi berbagai ujian kompetensi keperawatan.
        </p>
        <p class="app-features-intro">Apa yang bisa Anda lakukan di sini?</p>
        <ul class="app-features">
            <li>Berlatih soal-soal sesuai kategori keperawatan.</li>
            <li>Melihat pembahasan untuk memahami jawaban yang benar.</li>
            <li>Menguji kemampuan secara menyeluruh dengan mode Try Out.</li>
            <li>Menyimpan progres Try Out dan melanjutkan nanti.</li>
            <li>Melihat riwayat dan meninjau kembali hasil ujian Anda.</li>
        </ul>
        <p class="login-prompt">Siap untuk memulai? Silakan masukkan nama dan kode lisensi Anda:</p>
        <p class="buy-license-prompt">Anda belum memiliki Lisensi? Silakan beli Lisensinya disini </p>
        <p><a href="http://lynk.id/mascleine/8ed8kdpk0qrx" target="_blank" rel="noopener noreferrer" class="buy-license-link-action">BELI LISENSI BIMBEL</a></p>
        <input type="text" id="name-input" placeholder="Nama Lengkap Anda">
        <input type="text" id="license" placeholder="Masukkan Kode Lisensi Anda">
        <button id="submit-license-button">Masuk & Mulai Belajar</button>
        <div id="license-msg"></div>

        <p class="reset-prompt">
            Lupa logout atau lisensi Anda masih tertaut ke sesi sebelumnya?
        </p>
        <button id="reset-session-button">Reset Sesi Aktif Saya</button>
        <div id="reset-session-msg"></div>

        <div class="developer-credit">
            <img src="https://masandigital.com/assets/images/author-photo.jpeg" alt="Developer Photo">
            <p>Dikembangkan oleh: Mas Andy --> Kunjungi: <a href="https://masandigital.com" target="_blank">masandigital.com </a>
            </p>
        </div>
    </div>
    
    <!-- Skrip Lisensi Firebase (Dibiarkan sama) -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
      import { getFirestore, doc, getDoc, updateDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

      // --- KODE FIREBASE TIDAK BERUBAH ---
      // [.. Salin dan tempel semua kode Firebase Anda yang sudah ada di sini ..]
      const firebaseConfig = {
        apiKey: "AIzaSyDnJvECVfNJIXPh9rZTsA3QcHQaTiE4Awc", // GANTI DENGAN API KEY ANDA
        authDomain: "apodaca-bessie4762.firebaseapp.com", // GANTI DENGAN AUTH DOMAIN ANDA
        databaseURL: "https://apodaca-bessie4762.firebaseio.com", // GANTI DENGAN DATABASE URL ANDA (jika menggunakan Realtime DB)
        projectId: "apodaca-bessie4762", // GANTI DENGAN PROJECT ID ANDA
        storageBucket: "apodaca-bessie4762.firebasestorage.app", // GANTI DENGAN STORAGE BUCKET ANDA
        messagingSenderId: "809433417541", // GANTI DENGAN MESSAGING SENDER ID ANDA
        appId: "1:809433417541:web:48632b970a90840ab1602c" // GANTI DENGAN APP ID ANDA
      };
      let db;
      const licenseFormContainer = document.getElementById("license-form-container");
      const mainAppContent = document.getElementById("main-app-content");
      const submitButton = document.getElementById("submit-license-button");
      const licenseInput = document.getElementById("license");
      const nameInputElement = document.getElementById("name-input");
      const msgElement = document.getElementById("license-msg");
      const welcomeUserMessageEl = document.getElementById("main-menu-welcome-user");
      const mainMenuViewContainerEl = document.getElementById("main-menu-container");
      const userNameDisplayQuizEl = document.getElementById("user-name-display");
      const logoutButton = document.getElementById("logout-button");
      const resetButton = document.getElementById("reset-session-button");
      const resetMsgElement = document.getElementById("reset-session-msg");
      const STALE_SESSION_THRESHOLD = 5 * 60 * 1000;
      const HEARTBEAT_INTERVAL = 2 * 60 * 1000;
      let heartbeatIntervalId = null;
      function generateClientSessionId() { return Math.random().toString(36).substring(2, 15) + Date.now().toString(36); }
      function clearLocalSessionData() {
          if (sessionStorage) {
              sessionStorage.removeItem('licenseValidated');
              sessionStorage.removeItem('userName');
              sessionStorage.removeItem('licenseKey');
              sessionStorage.removeItem('clientSessionId');
          }
          if (localStorage) { // Juga bersihkan data localstorage terkait sesi
              // Hati-hati jangan hapus riwayat kuis, hanya progres yang sedang berjalan
              // Logic untuk ini akan ditangani oleh skrip utama
          }
      }
      function showLoginForm(message = "") {
          if (heartbeatIntervalId) { clearInterval(heartbeatIntervalId); heartbeatIntervalId = null; }
          clearLocalSessionData();
          if (typeof window.resetAppState === 'function') { window.resetAppState(); }
          if (licenseFormContainer) licenseFormContainer.style.display = "block";
          if (mainAppContent) mainAppContent.style.display = "none";
          if (msgElement) {
              msgElement.textContent = message;
              msgElement.style.color = message.toLowerCase().includes("error") || message.toLowerCase().includes("gagal") || message.toLowerCase().includes("tidak") || message.toLowerCase().includes("kesalahan") ? "#FF0000" : "#87CEFA";
          }
          if (submitButton) submitButton.disabled = false;
          if (resetButton) resetButton.disabled = false;
          if (licenseInput) licenseInput.value = "";
          if (resetMsgElement) resetMsgElement.textContent = "";
      }
      function proceedToApp(userName, licenseKey, clientSessionId) {
          if (welcomeUserMessageEl) welcomeUserMessageEl.textContent = `SELAMAT DATANG, ${userName.toUpperCase()}!`;
          if (userNameDisplayQuizEl) userNameDisplayQuizEl.textContent = userName;
          if (sessionStorage) {
              sessionStorage.setItem('licenseValidated', 'true');
              sessionStorage.setItem('userName', userName);
              sessionStorage.setItem('licenseKey', licenseKey);
              sessionStorage.setItem('clientSessionId', clientSessionId);
          }
          if (licenseFormContainer) licenseFormContainer.style.display = "none";
          if (mainAppContent) mainAppContent.style.display = "block";
          if (msgElement) msgElement.textContent = "";
          if (resetMsgElement) resetMsgElement.textContent = "";
          startHeartbeat(licenseKey, clientSessionId);
          if (typeof window.showView === 'function' && mainMenuViewContainerEl) {
              window.showView(mainMenuViewContainerEl); 
          } else {
              console.warn("window.showView or mainMenuViewContainerEl not found.");
          }
      }
      async function heartbeat(licenseKey, clientSessionId) {
          if (!db || !licenseKey || !clientSessionId) return;
          try {
              const docRef = doc(db, "licenses", licenseKey);
              const docSnap = await getDoc(docRef);
              if (docSnap.exists()) {
                  const data = docSnap.data();
                  if (data.active === true && data.activeSessionId === clientSessionId) {
                      await updateDoc(docRef, { lastSeenAt: serverTimestamp() });
                  } else {
                      showLoginForm("Sesi Anda telah diakhiri karena lisensi digunakan di tempat lain.");
                  }
              } else {
                  showLoginForm("Lisensi tidak ditemukan. Sesi diakhiri.");
              }
          } catch (error) {
              console.error("Heartbeat error:", error);
              if (error.code === 'permission-denied' || error.code === 'unauthenticated') {
                  showLoginForm(`Kesalahan izin pada heartbeat (${error.code}). Sesi diakhiri.`);
              }
          }
      }
      function startHeartbeat(licenseKey, clientSessionId) {
          if (heartbeatIntervalId) clearInterval(heartbeatIntervalId);
          heartbeat(licenseKey, clientSessionId);
          heartbeatIntervalId = setInterval(() => { heartbeat(licenseKey, clientSessionId); }, HEARTBEAT_INTERVAL);
      }
      try {
          const app = initializeApp(firebaseConfig);
          db = getFirestore(app);
          if (submitButton && licenseInput && msgElement && licenseFormContainer && mainAppContent && nameInputElement && mainMenuViewContainerEl) {
              submitButton.addEventListener("click", async (e) => {
                  e.preventDefault();
                  const licenseKey = licenseInput.value.trim();
                  const inputUserName = nameInputElement.value.trim();
                  if(resetMsgElement) resetMsgElement.textContent = "";
                  if (!inputUserName) { msgElement.textContent = "Silakan masukkan nama Anda."; msgElement.style.color = "#FF0000"; return; }
                  if (!licenseKey) { msgElement.textContent = "Silakan masukkan kode lisensi."; msgElement.style.color = "#FF0000"; return; }
                  if (licenseKey.includes('/')) { msgElement.textContent = "Kode lisensi mengandung karakter tidak valid ('/')."; msgElement.style.color = "#FF0000"; return; }
                  msgElement.textContent = "Memeriksa lisensi..."; msgElement.style.color = "#FFA500";
                  submitButton.disabled = true; if(resetButton) resetButton.disabled = true;
                  try {
                      const docRef = doc(db, "licenses", licenseKey);
                      const docSnap = await getDoc(docRef);
                      if (docSnap.exists() && docSnap.data().active === true) {
                          const licenseData = docSnap.data();
                          const lastSeenTimestamp = licenseData.lastSeenAt; 
                          const lastSeenDate = lastSeenTimestamp ? lastSeenTimestamp.toDate() : null;
                          let canTakeLicense = !licenseData.activeSessionId || (lastSeenDate && (new Date().getTime() - lastSeenDate.getTime()) > STALE_SESSION_THRESHOLD);
                          if (canTakeLicense) {
                              const newClientSessionId = generateClientSessionId();
                              await updateDoc(docRef, { activeSessionId: newClientSessionId, lastSeenAt: serverTimestamp(), userName: inputUserName });
                              msgElement.style.color = "#90EE90"; msgElement.textContent = "Lisensi valid. Akses diberikan!";
                              proceedToApp(inputUserName, licenseKey, newClientSessionId);
                          } else {
                              msgElement.style.color = "#FF0000"; msgElement.textContent = "Lisensi ini sedang aktif digunakan di browser/perangkat lain.";
                              clearLocalSessionData();
                          }
                      } else {
                          msgElement.style.color = "#FF0000";
                          msgElement.textContent = docSnap.exists() ? "Mohon maaf, Lisensi ini tidak aktif." : "Mohon maaf, Lisensi tidak ditemukan.";
                          clearLocalSessionData();
                      }
                  } catch (error) {
                      console.error("Firestore GAGAL saat memeriksa lisensi:", error);
                      msgElement.style.color = "#FF0000";
                      msgElement.textContent = `Terjadi kesalahan (${error.code || 'Tidak Diketahui'}). Cek koneksi & konsol browser.`;
                      clearLocalSessionData();
                  } finally {
                      submitButton.disabled = false; if(resetButton) resetButton.disabled = false;
                  }
              });
              if (sessionStorage && sessionStorage.getItem('licenseValidated') === 'true') {
                  const savedUserName = sessionStorage.getItem('userName');
                  const savedLicenseKey = sessionStorage.getItem('licenseKey');
                  const savedClientSessionId = sessionStorage.getItem('clientSessionId');
                  if (savedUserName && savedLicenseKey && savedClientSessionId) {
                      msgElement.textContent = "Memvalidasi sesi..."; msgElement.style.color = "#FFA500";
                      (async () => {
                          try {
                              const docRef = doc(db, "licenses", savedLicenseKey);
                              const docSnap = await getDoc(docRef);
                              if (docSnap.exists() && docSnap.data().active === true && docSnap.data().activeSessionId === savedClientSessionId) {
                                  await updateDoc(docRef, { lastSeenAt: serverTimestamp() });
                                  proceedToApp(savedUserName, savedLicenseKey, savedClientSessionId);
                              } else { showLoginForm("Sesi sebelumnya tidak valid. Silakan masuk kembali."); }
                          } catch (err) { showLoginForm(`Gagal memvalidasi sesi (${err.code || 'Tidak Diketahui'}).`); }
                      })();
                  } else { clearLocalSessionData(); }
              }
          } else { console.error("Elemen form lisensi atau aplikasi utama tidak ditemukan!"); }
          if (resetButton && licenseInput && resetMsgElement) {
              resetButton.addEventListener("click", async (e) => {
                  e.preventDefault();
                  const licenseKeyToReset = licenseInput.value.trim();
                  if(msgElement) msgElement.textContent = "";
                  if (!licenseKeyToReset) { resetMsgElement.textContent = "Masukkan kode lisensi yang ingin direset."; resetMsgElement.style.color = "#FFFF00"; return; }
                  if (licenseKeyToReset.includes('/')) { resetMsgElement.textContent = "Kode lisensi mengandung karakter tidak valid ('/')."; resetMsgElement.style.color = "#FF0000"; return; }
                  resetMsgElement.textContent = "Memproses..."; resetMsgElement.style.color = "#FFA500";
                  resetButton.disabled = true; if (submitButton) submitButton.disabled = true;
                  try {
                      const docRef = doc(db, "licenses", licenseKeyToReset);
                      const docSnap = await getDoc(docRef);
                      if (docSnap.exists()) {
                          await updateDoc(docRef, { activeSessionId: null, lastSeenAt: serverTimestamp() });
                          resetMsgElement.style.color = "#90EE90"; resetMsgElement.textContent = `Sesi untuk lisensi "${licenseKeyToReset}" telah berhasil direset. Silakan coba masuk lagi.`;
                      } else {
                          resetMsgElement.style.color = "#FF4500"; resetMsgElement.textContent = `Lisensi "${licenseKeyToReset}" tidak ditemukan.`;
                      }
                  } catch (error) {
                      console.error("Firestore GAGAL saat mereset sesi:", error);
                      resetMsgElement.style.color = "#FF0000"; resetMsgElement.textContent = `Terjadi kesalahan saat mereset sesi (${error.code || 'Tidak Diketahui'}).`;
                  } finally {
                      resetButton.disabled = false; if (submitButton) submitButton.disabled = false;
                  }
              });
          }
      } catch (error) { 
          console.error("Inisialisasi Firebase gagal:", error);
          if(msgElement) { msgElement.textContent = `Gagal koneksi ke server. Coba lagi nanti.`; msgElement.style.color = "#FF0000"; }
      }
      if (logoutButton) {
          logoutButton.addEventListener('click', async () => {
              const licenseKey = sessionStorage.getItem('licenseKey');
              const clientSessionId = sessionStorage.getItem('clientSessionId');
              if (db && licenseKey && clientSessionId) {
                  try {
                      const docRef = doc(db, "licenses", licenseKey);
                      await updateDoc(docRef, { activeSessionId: null, lastSeenAt: serverTimestamp() });
                  } catch (error) { console.error("Error releasing license on logout:", error); }
              }
              showLoginForm("Anda telah berhasil logout.");
          });
      }
      window.addEventListener('beforeunload', (event) => {
          if (sessionStorage && sessionStorage.getItem('licenseValidated') === 'true') {
              const licenseKey = sessionStorage.getItem('licenseKey');
              if (db && licenseKey) {
                  const docRef = doc(db, "licenses", licenseKey);
                  updateDoc(docRef, { lastSeenAt: serverTimestamp() });
              }
              // Progress saving is handled by script.js, not here.
          }
      });
    </script>
    
    <!-- Kontainer untuk Aplikasi Utama (setelah lisensi valid) -->
    <div id="main-app-content">
        <!-- MENU UTAMA BARU -->
        <div id="main-menu-container" class="container-view hidden">
            <h2 id="main-menu-welcome-user"></h2>
            <h3>Menu Utama</h3>
            <div class="card-menu-grid">
                <button id="main-menu-latihan-soal" class="card-menu-item">
                    <div class="card-menu-icon-wrapper card-color-1"><span>📚</span></div>
                    <div class="card-menu-text">
                        <span class="card-menu-title">Latihan Pembahasan Soal</span>
                        <span class="card-menu-description">Asah kemampuan per kategori dengan pembahasan lengkap.</span>
                    </div>
                </button>
                <button id="main-menu-tryout" class="card-menu-item">
                    <div class="card-menu-icon-wrapper card-color-2"><span>⏱️</span></div>
                    <div class="card-menu-text">
                        <span class="card-menu-title">Try Out</span>
                        <span class="card-menu-description">Uji kemampuan menyeluruh dengan batas waktu.</span>
                    </div>
                </button>
                <!-- Tombol Riwayat Baru -->
                <button id="main-menu-history" class="card-menu-item">
                    <div class="card-menu-icon-wrapper card-color-6"><span>📈</span></div>
                    <div class="card-menu-text">
                        <span class="card-menu-title">Riwayat & Performa</span>
                        <span class="card-menu-description">Lihat riwayat pengerjaan dan skor Anda.</span>
                    </div>
                </button>
                <button id="logout-button" class="card-menu-item">
                    <div class="card-menu-icon-wrapper card-color-3"><span>🚪</span></div>
                    <div class="card-menu-text">
                        <span class="card-menu-title">Logout</span>
                        <span class="card-menu-description">Keluar dari sesi & kembali ke halaman login.</span>
                    </div>
                </button>
            </div>
        </div>

        <!-- View Riwayat Baru -->
        <div id="history-container" class="container-view hidden">
            <h3>Riwayat Pengerjaan Kuis</h3>
            <div id="history-list-container">
                <!-- Riwayat akan di-generate oleh JavaScript di sini -->
                <p id="no-history-message">Anda belum memiliki riwayat pengerjaan.</p>
            </div>
            <button id="kembali-ke-main-menu-from-history" class="card-menu-item back-button-card">
                <div class="card-menu-icon-wrapper card-color-3"><span>↩️</span></div>
                <div class="card-menu-text">
                    <span class="card-menu-title">Kembali ke Menu Utama</span>
                </div>
            </button>
        </div>

        <!-- SUBMENU LATIHAN SOAL BARU (Tidak Berubah) -->
        <div id="latihan-soal-submenu-container" class="container-view hidden">
            <h3>Pilih Jenis Latihan Pembahasan Soal</h3>
            <div class="card-menu-grid">
                <button id="latihan-departemen-button" class="card-menu-item">
                    <div class="card-menu-icon-wrapper card-color-4"><span>📂</span></div>
                    <div class="card-menu-text">
                        <span class="card-menu-title">Latihan per Departemen</span>
                        <span class="card-menu-description">Pilih soal dari 7 departemen keperawatan.</span>
                    </div>
                </button>
                <button id="latihan-gabungan-button" class="card-menu-item" data-file="gabungan.json">
                    <div class="card-menu-icon-wrapper card-color-5"><span>🔄</span></div>
                    <div class="card-menu-text">
                        <span class="card-menu-title">Latihan Soal Gabungan</span>
                        <span class="card-menu-description">Kerjakan soal acak dari semua kategori.</span>
                    </div>
                </button>
            </div>
            <button id="kembali-ke-main-menu-from-latihan-submenu" class="card-menu-item back-button-card">
                <div class="card-menu-icon-wrapper card-color-6"><span>↩️</span></div>
                <div class="card-menu-text">
                    <span class="card-menu-title">Kembali ke Menu Utama</span>
                </div>
            </button>
        </div>
        
        <!-- SUBMENU TRY OUT BARU (Tidak Berubah) -->
        <div id="tryout-submenu-container" class="container-view hidden">
            <h3>Pilih Jenis Try Out</h3>
            <div class="card-menu-grid">
                <button id="tryout-gabungan-semua-button" class="card-menu-item">
                    <div class="card-menu-icon-wrapper card-color-6"><span>🌐</span></div>
                    <div class="card-menu-text">
                        <span class="card-menu-title">Try Out Gabungan</span>
                        <span class="card-menu-description">Simulasi 180 soal dari semua kategori.</span>
                    </div>
                </button>
                <button id="tryout-mode-serius-button" class="card-menu-item">
                    <div class="card-menu-icon-wrapper card-color-7"><span>🏆</span></div>
                    <div class="card-menu-text">
                        <span class="card-menu-title">Try Out Mode Serius</span>
                        <span class="card-menu-description">Kerjakan paket soal TO yang telah disiapkan.</span>
                    </div>
                </button>
            </div>
            <button id="kembali-ke-main-menu-from-tryout-submenu" class="card-menu-item back-button-card">
                <div class="card-menu-icon-wrapper card-color-3"><span>↩️</span></div>
                <div class="card-menu-text">
                    <span class="card-menu-title">Kembali ke Menu Utama</span>
                </div>
            </button>
        </div>

        <!-- KATEGORI LATIHAN BARU (Tidak Berubah) -->
        <div id="kategori-latihan-container" class="container-view hidden">
            <h3>Pilih Kategori Latihan Pembahasan Soal</h3>
            <div class="card-menu-grid card-menu-grid-dense">
                <button class="card-menu-item kategori-button" data-script="jiwa.js">
                    <div class="card-menu-icon-wrapper card-color-1"><span>🧠</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">Keperawatan Jiwa</span></div>
                </button>
                <button class="card-menu-item kategori-button" data-script="anak.js">
                    <div class="card-menu-icon-wrapper card-color-4"><span>👶</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">Keperawatan Anak</span></div>
                </button>
                <button class="card-menu-item kategori-button" data-script="keluarga.js">
                    <div class="card-menu-icon-wrapper card-color-5"><span>👨‍👩‍👧</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">Keperawatan Keluarga</span></div>
                </button>
                <button class="card-menu-item kategori-button" data-script="komunitas.js">
                    <div class="card-menu-icon-wrapper card-color-8"><span>🏘️</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">Keperawatan Komunitas</span></div>
                </button>
                <button class="card-menu-item kategori-button" data-script="bedah.js">
                    <div class="card-menu-icon-wrapper card-color-9"><span>🏥</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">Keperawatan Medikal Bedah</span></div>
                </button>
                <button class="card-menu-item kategori-button" data-script="gadar.js">
                    <div class="card-menu-icon-wrapper card-color-7"><span>🚑</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">Keperawatan Gawat Darurat</span></div>
                </button>
                <button class="card-menu-item kategori-button" data-script="manajemen.js">
                    <div class="card-menu-icon-wrapper card-color-10"><span>📋</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">Manajemen Keperawatan</span></div>
                </button>
            </div>
            <button id="kembali-ke-latihan-submenu-from-kategori" class="card-menu-item back-button-card">
                 <div class="card-menu-icon-wrapper card-color-6"><span>↩️</span></div>
                <div class="card-menu-text"><span class="card-menu-title">Kembali ke Pilihan Latihan</span></div>
            </button>
        </div>
        
        <!-- TRYOUT SERIUS BARU (Tidak Berubah) -->
        <div id="tryout-serius-container" class="container-view hidden">
            <h3>Pilih Tipe Try Out Serius</h3>
            <div class="card-menu-grid card-menu-grid-dense">
                <button class="card-menu-item tryout-serius-button" data-file="TO1.json" data-type="TO Tipe 1">
                    <div class="card-menu-icon-wrapper card-color-11"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 1</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO2.json" data-type="TO Tipe 2">
                    <div class="card-menu-icon-wrapper card-color-1"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 2</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO3.json" data-type="TO Tipe 3">
                    <div class="card-menu-icon-wrapper card-color-2"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 3</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO4.json" data-type="TO Tipe 4">
                    <div class="card-menu-icon-wrapper card-color-4"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 4</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO5.json" data-type="TO Tipe 5">
                    <div class="card-menu-icon-wrapper card-color-5"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 5</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO6.json" data-type="TO Tipe 6">
                    <div class="card-menu-icon-wrapper card-color-6"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 6</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO7.json" data-type="TO Tipe 7">
                    <div class="card-menu-icon-wrapper card-color-7"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 7</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO8.json" data-type="TO Tipe 8">
                    <div class="card-menu-icon-wrapper card-color-9"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 8</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO9.json" data-type="TO Tipe 9">
                    <div class="card-menu-icon-wrapper card-color-8"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 9</span></div>
                </button>
                <button class="card-menu-item tryout-serius-button" data-file="TO10.json" data-type="TO Tipe 10">
                    <div class="card-menu-icon-wrapper card-color-default"><span>📄</span></div>
                    <div class="card-menu-text"><span class="card-menu-title">TO Tipe 10</span></div>
                </button>
            </div>
            <button id="kembali-ke-tryout-submenu-from-serius" class="card-menu-item back-button-card">
                <div class="card-menu-icon-wrapper card-color-3"><span>↩️</span></div>
                <div class="card-menu-text"><span class="card-menu-title">Kembali ke Pilihan Try Out</span></div>
            </button>
        </div>

        <!-- Quiz & Result Views -->
        <div id="quiz-layout-container" class="container-view hidden">
            <div id="quiz-main-content">
                <div id="question-counter" class="hidden">Soal 1 dari X</div>
                <div id="question"></div>
                <div id="options-container"></div>
                <div id="explanation" class="hidden"></div>
                <div id="navigation-buttons">
                    <!-- Tombol Ragu-ragu dipindah ke grup kiri -->
                    <div class="nav-left">
                        <button id="doubtful-button" class="btn-doubtful hidden">Tandai Ragu-ragu</button>
                    </div>
                    <!-- Tombol Navigasi dipindah ke grup kanan -->
                    <div class="nav-right">
                         <button class="btn-home" id="quiz-back-button">Kembali</button>
                         <button class="btn-next" id="next-question-button" class="hidden">Soal Berikutnya</button>
                    </div>
                </div>
            </div>

            <div id="quiz-sidebar">
                <div id="user-biodata">
                    <div id="user-photo-icon">
                        <img src="user.png" alt="Foto Pengguna">
                    </div>
                    <div id="user-name-display">Nama Pengguna</div>
                </div>
                <div id="timer-display-sidebar" class="hidden">
                    Sisa Waktu: <span id="time-left-sidebar">180:00</span>
                </div>
                <div id="question-navigation-panel">
                    <h4 id="question-nav-title">Navigasi Soal</h4>
                    <div id="question-navigation-grid">
                    </div>
                </div>
            </div>
        </div>

        <div id="result-container" class="container-view hidden">
            <h2 id="result-title">Hasil Kuis</h2>
            <p id="score"></p>
            <!-- Grup Tombol Hasil -->
            <div id="result-actions">
                <button id="restart-button" class="btn-home">Kembali ke Menu</button>
                <button id="review-answers-button" class="btn-review hidden">Tinjau Jawaban</button>
                <button id="retry-incorrect-button" class="btn-retry hidden">Ulangi Soal Salah</button>
            </div>
        </div>

        <footer id="footer">
            <center><p>With Love © Copyright by Mas Andy</p></center>
        </footer>
    </div>


    <!-- Skrip Aplikasi Utama -->
    <script src="script.js"></script>

    <!-- Histats (Tidak Berubah) -->
    <div id="histats_counter"></div>
    <script type="text/javascript">var _Hasync= _Hasync|| [];
    _Hasync.push(['Histats.start', '1,4842415,4,1,120,40,00011111']);
    _Hasync.push(['Histats.fasi', '1']);
    _Hasync.push(['Histats.track_hits', '']);
    (function() {
    var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
    hs.src = ('//s10.histats.com/js15_as.js');
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
    })();</script>
    <noscript><a href="/" target="_blank"><img  src="//sstatic1.histats.com/0.gif?4842415&101" alt="" border="0"></a></noscript>

</body>
</html>
